<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login / Register</title>
    <link rel="stylesheet" href="loginstyle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

</head>

<body class="auth-page">
    <div class="auth-card">
        <h2>My App</h2>

        <div class="tabs">
            <div class="tab active" data-form="login">Login</div>
            <div class="tab" data-form="register">Register</div>
        </div>

        <!-- Login Form -->
        <div id="loginForm">
            <div class="form-group">
                <input type="email" id="loginEmail" placeholder="Email" required>
            </div>
            <div class="form-group password-group">
                <input type="password" id="loginPassword" placeholder="Password" required>
                <span class="show-pass" data-target="loginPassword">üëÅ</span>
            </div>
            <div class="link-text">
                <a id="forgotLink">Forgot Password?</a>
            </div>
            <button class="submit-btn" id="loginBtn">Login</button>
            <div class="loader" id="loginLoader"></div>
            <div id="loginMessage"></div>
            <div class="link-text">
                Don't have an account? <a id="toRegister">Register</a>
            </div>
        </div>

        <!-- Register Form -->
        <div id="registerForm" style="display: none;">
            <div class="form-group">
                <input type="text" id="regName" placeholder="Full Name" required>
            </div>
            <div class="form-group">
                <input type="email" id="regEmail" placeholder="Email" required>
            </div>
            <div class="form-group password-group">
                <input type="password" id="regPassword" placeholder="Password" required>
                <span class="show-pass" data-target="regPassword">üëÅ</span>
            </div>
            <button class="submit-btn" id="registerBtn">Create Account</button>
            <div class="loader" id="regLoader"></div>
            <div id="registerMessage"></div>
            <div class="link-text">
                Already have an account? <a id="toLogin">Login</a>
            </div>
        </div>

        <!-- Forgot Form -->
        <div id="forgotForm" style="display: none;">
            <div class="form-group">
                <input type="email" id="forgotEmail" placeholder="Enter your email" required>
            </div>
            <button class="submit-btn" id="forgotBtn">Send Reset Link</button>
            <div class="loader" id="forgotLoader"></div>
            <div id="forgotMessage"></div>
            <div class="link-text">
                <a id="backToLoginLink">Back to Login</a>
            </div>
        </div>
    </div>

    <script src="js/auth.js"></script>
    <script>
        /* =========================
   TAB SWITCHING
========================= */

        const tabs = document.querySelectorAll(".tab");
        const loginForm = document.getElementById("loginForm");
        const registerForm = document.getElementById("registerForm");
        const forgotForm = document.getElementById("forgotForm");

        tabs.forEach(tab => {
            tab.addEventListener("click", () => {
                tabs.forEach(t => t.classList.remove("active"));
                tab.classList.add("active");

                loginForm.style.display = tab.dataset.form === "login" ? "block" : "none";
                registerForm.style.display = tab.dataset.form === "register" ? "block" : "none";
                forgotForm.style.display = "none";
            });
        });

        /* =========================
           LINKS
        ========================= */

        document.getElementById("toRegister").onclick = () => {
            tabs[1].click();
        };

        document.getElementById("toLogin").onclick = () => {
            tabs[0].click();
        };

        document.getElementById("forgotLink").onclick = () => {
            loginForm.style.display = "none";
            registerForm.style.display = "none";
            forgotForm.style.display = "block";
        };

        document.getElementById("backToLoginLink").onclick = () => {
            tabs[0].click();
        };

        /* =========================
           PASSWORD SHOW / HIDE
        ========================= */

        document.querySelectorAll(".show-pass").forEach(btn => {
            btn.addEventListener("click", () => {
                const input = document.getElementById(btn.dataset.target);
                input.type = input.type === "password" ? "text" : "password";
            });
        });

        /* =========================
           LOGIN LOADING + SHAKE
        ========================= */

        const card = document.querySelector(".auth-card");

        function fakeSubmit(btn, loader, msg, success = false) {
            loader.style.display = "block";
            btn.disabled = true;

            setTimeout(() => {
                loader.style.display = "none";
                btn.disabled = false;

                if (!success) {
                    msg.textContent = "Invalid credentials";
                    msg.style.color = "#f87171";
                    card.classList.add("shake");
                    setTimeout(() => card.classList.remove("shake"), 500);
                } else {
                    msg.textContent = "Success!";
                    msg.style.color = "#4ade80";
                }
            }, 1500);
        }

        document.getElementById("loginBtn").onclick = () => {
            fakeSubmit(
                document.getElementById("loginBtn"),
                document.getElementById("loginLoader"),
                document.getElementById("loginMessage")
            );
        };

        document.getElementById("registerBtn").onclick = () => {
            fakeSubmit(
                document.getElementById("registerBtn"),
                document.getElementById("regLoader"),
                document.getElementById("registerMessage"),
                true
            );
        };

        document.getElementById("forgotBtn").onclick = () => {
            fakeSubmit(
                document.getElementById("forgotBtn"),
                document.getElementById("forgotLoader"),
                document.getElementById("forgotMessage"),
                true
            );
        };

        /* =========================
        FLOATING TECH ICONS
     ========================= */

        const techIcons = [
            { icon: "fa-html5", glow: "glow-html" },
            { icon: "fa-css3-alt", glow: "glow-css" },
            { icon: "fa-js", glow: "glow-js" },
            { icon: "fa-react", glow: "glow-react" },
            { icon: "fa-node-js", glow: "glow-node" },
            { icon: "fa-python", glow: "glow-python" },
            { icon: "fa-github", glow: "glow-github" }
        ];

        const techLayer = document.createElement("div");
        techLayer.className = "tech-bg";
        document.body.prepend(techLayer);

        const iconsOnScreen = [];

        /* RESPONSIVE ICON COUNT */
        function getIconCount() {
            const w = window.innerWidth;

            if (w >= 1440) return 28;
            if (w >= 1200) return 22;
            if (w >= 992) return 18;
            if (w >= 768) return 14;
            if (w >= 480) return 10;
            return 7;
        }

        /* CREATE ICONS */
        function createIcons() {
            techLayer.innerHTML = "";
            iconsOnScreen.length = 0;

            const ICON_COUNT = getIconCount();

            for (let i = 0; i < ICON_COUNT; i++) {
                const data = techIcons[Math.floor(Math.random() * techIcons.length)];

                const el = document.createElement("i");
                el.className = `fa-brands ${data.icon} tech-icon ${data.glow}`;

                el.style.left = Math.random() * 100 + "vw";
                el.style.top = Math.random() * 100 + "vh";

                const baseSpeed = window.innerWidth < 768 ? 32 : 22;
                el.style.animationDuration = baseSpeed + Math.random() * 18 + "s";
                el.style.animationDelay = Math.random() * -20 + "s";

                techLayer.appendChild(el);
                iconsOnScreen.push(el);
            }
        }

        /* Mouse proximity glow */
        document.addEventListener("mousemove", (e) => {
            iconsOnScreen.forEach(icon => {
                const rect = icon.getBoundingClientRect();
                const cx = rect.left + rect.width / 2;
                const cy = rect.top + rect.height / 2;

                const dist = Math.hypot(e.clientX - cx, e.clientY - cy);

                if (dist < 160) {
                    icon.classList.add("active");
                } else {
                    icon.classList.remove("active");
                }
            });
        });

        /* INIT */
        createIcons();

        /* Regenerate on resize (debounced) */
        let resizeTimer;
        window.addEventListener("resize", () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(createIcons, 300);
        });


    </script>
</body>

</html>